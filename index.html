<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–ú—ñ–π –†–µ—Å—Ç–æ—Ä–∞–Ω</title>
    <style>
        /* –¢—Ä–æ—Ö–∏ —Å—Ç–∏–ª—ñ–≤, —â–æ–± –±—É–ª–æ –≥–∞—Ä–Ω–æ */
        body { font-family: sans-serif; padding: 20px; }
        .grid { display: flex; gap: 20px; flex-wrap: wrap; }
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            width: 250px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .card img { max-width: 100%; border-radius: 5px; }
        .price { color: green; font-weight: bold; font-size: 1.2em; }
    </style>
</head>
<body>

    <h1>üçï –ú–µ–Ω—é –Ω–∞—à–æ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—É</h1>
    <div id="menu-container" class="grid">
        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–µ–Ω—é...</p>
    </div>

    <script>
        // –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞
        async function getMenu() {
            try {
                // 1. –†–æ–±–∏–º–æ –∑–∞–ø–∏—Ç –¥–æ —Ç–≤–æ–≥–æ FastAPI —Å–µ—Ä–≤–µ—Ä–∞
                // –ó–≤–µ—Ä–Ω–∏ —É–≤–∞–≥—É: –º–∏ –∑–≤–µ—Ä—Ç–∞—î–º–æ—Å—å –¥–æ localhost:8000
                const response = await fetch('http://127.0.0.1:8000/dishes');

                // 2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Å–µ—Ä–≤–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–≤ –û–ö
                if (!response.ok) {
                    throw new Error("–ü–æ–º–∏–ª–∫–∞ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º");
                }

                // 3. –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —É JSON (–º–∞—Å–∏–≤ —Å—Ç—Ä–∞–≤)
                const dishes = await response.json();

                // 4. –û—á–∏—â–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ñ–¥ –Ω–∞–ø–∏—Å—É "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è..."
                const container = document.getElementById('menu-container');
                container.innerHTML = '';

                // 5. –ü—Ä–æ—Ö–æ–¥–∏–º–æ—Å—è –ø–æ –∫–æ–∂–Ω—ñ–π —Å—Ç—Ä–∞–≤—ñ —ñ –º–∞–ª—é—î–º–æ –∫–∞—Ä—Ç–∫—É
                dishes.forEach(dish => {
                    // –§–æ—Ä–º—É—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É
                    // –Ø–∫—â–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ —î - –±–µ—Ä–µ–º–æ —ó—ó, —è–∫—â–æ –Ω—ñ - –∑–∞–≥–ª—É—à–∫–∞
                    // –í–∞–∂–ª–∏–≤–æ: –¥–æ–¥–∞—î–º–æ –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞ http://127.0.0.1:8000/ –ø–µ—Ä–µ–¥ —à–ª—è—Ö–æ–º
                    const imageUrl = dish.image_url
                        ? `http://127.0.0.1:8000/${dish.image_url}`
                        : 'https://via.placeholder.com/250x150?text=No+Image';

                    const dishHtml = `
                        <div class="card">
                            <img src="${imageUrl}" alt="${dish.name}">
                            <h3>${dish.name}</h3>
                            <p>${dish.description || '–û–ø–∏—Å –≤—ñ–¥—Å—É—Ç–Ω—ñ–π'}</p>
                            <p class="price">${dish.price} –≥—Ä–Ω</p>
                        </div>
                    `;
                    // –î–æ–¥–∞—î–º–æ –∫–∞—Ä—Ç–∫—É –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É
                    container.insertAdjacentHTML('beforeend', dishHtml);
                });

            } catch (error) {
                console.error(error);
                document.getElementById('menu-container').innerHTML =
                    `<p style="color:red">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–µ–Ω—é. –ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä!</p>`;
            }
        }

        // –ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü—ñ—ó
        getMenu();
    </script>

</body>
</html>